{"version":3,"sources":["../../src/static/exporter.js"],"names":["require","setIgnorePath","config","routes","siteData","clientStats","htmlProgress","length","paths","DIST","Comp","glob","sync","path","resolve","ASSETS","default","DocumentTemplate","Document","DefaultDocument","tasks","i","route","push","tick","Number","outputFileRate"],"mappings":";;;;;;;;;AAIA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;AATA;eAE0BA,OAAO,CAAC,oBAAD,C;IAAzBC,a,YAAAA,a;;;;;;;4BASO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAASC,YAAAA,MAAT,QAASA,MAAT,EAAiBC,MAAjB,QAAiBA,MAAjB,EAAyBC,QAAzB,QAAyBA,QAAzB,EAAmCC,WAAnC,QAAmCA,WAAnC;AACPC,YAAAA,YADO,GACQ,qBAASH,MAAM,CAACI,MAAhB,CADR,EAEb;;AAEAN,YAAAA,aAAa,CAACC,MAAM,CAACM,KAAP,CAAaC,IAAd,CAAb;AAEMC,YAAAA,IANO,GAMAV,OAAO,CAACW,cAAKC,IAAL,CACnBC,cAAKC,OAAL,CAAaZ,MAAM,CAACM,KAAP,CAAaO,MAA1B,EAAkC,aAAlC,CADmB,EAEnB,CAFmB,CAAD,CAAP,CAEPC,OARO,EASb;;AACMC,YAAAA,gBAVO,GAUYf,MAAM,CAACgB,QAAP,IAAmBC,+BAV/B;AAYPC,YAAAA,KAZO,GAYC,EAZD;;AAAA,mCAaJC,CAbI;AAcX,kBAAMC,KAAK,GAAGnB,MAAM,CAACkB,CAAD,CAApB,CAdW,CAeX;;AACAD,cAAAA,KAAK,CAACG,IAAN;AAAA;AAAA;AAAA;AAAA,wCAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACH,0BAAY;AAChBrB,0BAAAA,MAAM,EAANA,MADgB;AAEhBQ,0BAAAA,IAAI,EAAJA,IAFgB;AAGhBO,0BAAAA,gBAAgB,EAAhBA,gBAHgB;AAIhBK,0BAAAA,KAAK,EAALA,KAJgB;AAKhBlB,0BAAAA,QAAQ,EAARA,QALgB;AAMhBC,0BAAAA,WAAW,EAAXA;AANgB,yBAAZ,CADG;;AAAA;AASTC,wBAAAA,YAAY,CAACkB,IAAb;;AATS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAX;AAhBW;;AAab,iBAASH,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAGlB,MAAM,CAACI,MAA3B,EAAmCc,CAAC,EAApC,EAAwC;AAAA,oBAA/BA,CAA+B;AAcvC;;AA3BY;AAAA,mBA4BP,oBAAQD,KAAR,EAAeK,MAAM,CAACvB,MAAM,CAACwB,cAAR,CAArB,CA5BO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/* eslint-disable import/first, import/no-dynamic-require */\n\nconst { setIgnorePath } = require('../utils/binHelper')\n\nimport glob from 'glob'\nimport path from 'path'\n\nimport { DefaultDocument } from './RootComponents'\nimport { poolAll, progress } from '../utils'\nimport exportRoute from './exportRoute'\n\nexport default async ({ config, routes, siteData, clientStats }) => {\n  const htmlProgress = progress(routes.length)\n  // Use the node version of the app created with webpack\n\n  setIgnorePath(config.paths.DIST)\n\n  const Comp = require(glob.sync(\n    path.resolve(config.paths.ASSETS, 'static.*.js')\n  )[0]).default\n  // Retrieve the document template\n  const DocumentTemplate = config.Document || DefaultDocument\n\n  const tasks = []\n  for (let i = 0; i < routes.length; i++) {\n    const route = routes[i]\n    // eslint-disable-next-line\n    tasks.push(async () => {\n      await exportRoute({\n        config,\n        Comp,\n        DocumentTemplate,\n        route,\n        siteData,\n        clientStats,\n      })\n      htmlProgress.tick()\n    })\n  }\n  await poolAll(tasks, Number(config.outputFileRate))\n}\n"],"file":"exporter.js"}