{"version":3,"sources":["../../src/static/exportSharedRouteData.js"],"names":["config","sharedDataByHash","sharedDataArr","Array","from","length","console","log","jsonProgress","chalk","green","map","cachedProp","fs","outputFile","path","join","paths","STATIC_DATA","hash","JSON","stringify","data","tick","Number","outputFileRate","exportSharedRouteData"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;;4BAEgB,kBAAqCA,MAArC,EAA6CC,gBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AACd;AACMC,YAAAA,aAFQ,GAEQC,KAAK,CAACC,IAAN,CAAWH,gBAAX,CAFR;;AAAA,iBAIVC,aAAa,CAACG,MAJJ;AAAA;AAAA;AAAA;;AAKZC,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACMC,YAAAA,YANM,GAMS,qBAASN,aAAa,CAACG,MAAvB,CANT;AAOZ,6BAAKI,eAAMC,KAAN,CAAY,wCAAZ,CAAL;AAPY;AAAA,mBASN,oBACJR,aAAa,CAACS,GAAd,CAAkB,UAAAC,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACxBC,iBAAGC,UAAH,CACJC,cAAKC,IAAL,CAAUhB,MAAM,CAACiB,KAAP,CAAaC,WAAvB,YAAuCN,UAAU,CAAC,CAAD,CAAV,CAAcO,IAArD,WADI,EAEJC,IAAI,CAACC,SAAL,CAAeT,UAAU,CAAC,CAAD,CAAV,CAAcU,IAA7B,CAFI,CADwB;;AAAA;AAK9Bd,0BAAAA,YAAY,CAACe,IAAb;;AAL8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAJ;AAAA;AAAA,aAA5B,CADI,EAQJC,MAAM,CAACxB,MAAM,CAACyB,cAAR,CARF,CATM;;AAAA;AAmBZ,gCAAQhB,eAAMC,KAAN,CAAY,wCAAZ,CAAR;;AAnBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAegB,qB;;;;SAAAA,qB","sourcesContent":["import chalk from 'chalk'\nimport fs from 'fs-extra'\nimport path from 'path'\nimport { progress, time, timeEnd, poolAll } from '../utils'\n\nexport default (async function exportSharedRouteData(config, sharedDataByHash) {\n  // Write all shared props to file\n  const sharedDataArr = Array.from(sharedDataByHash)\n\n  if (sharedDataArr.length) {\n    console.log('=> Exporting Shared Route Data...')\n    const jsonProgress = progress(sharedDataArr.length)\n    time(chalk.green('=> [\\u2713] Shared Route Data Exported'))\n\n    await poolAll(\n      sharedDataArr.map(cachedProp => async () => {\n        await fs.outputFile(\n          path.join(config.paths.STATIC_DATA, `${cachedProp[1].hash}.json`),\n          JSON.stringify(cachedProp[1].data)\n        )\n        jsonProgress.tick()\n      }),\n      Number(config.outputFileRate)\n    )\n    timeEnd(chalk.green('=> [\\u2713] Shared Route Data Exported'))\n  }\n})\n"],"file":"exportSharedRouteData.js"}