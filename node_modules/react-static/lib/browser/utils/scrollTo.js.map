{"version":3,"sources":["../../../src/browser/utils/scrollTo.js"],"names":["ease","t","defaultOptions","duration","offset","context","document","window","getTop","element","contextScrollHeight","contextVisibleHeight","Math","min","getBoundingClientRect","top","pageYOffset","getPosition","start","end","elapsed","easeFn","scrollTo","options","innerHeight","scrollHeight","offsetHeight","body","clock","Date","now","Promise","resolve","step","parseInt","scrollTop","scroll"],"mappings":"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","sourcesContent":["import raf from 'raf'\n//\nconst ease = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t)\n\nconst defaultOptions = {\n  duration: 800,\n  offset: 0,\n  context: typeof document !== 'undefined' && window,\n}\n\nconst getTop = (element, offset, contextScrollHeight, contextVisibleHeight) =>\n  Math.min(\n    element.getBoundingClientRect().top + window.pageYOffset + offset,\n    contextScrollHeight - contextVisibleHeight\n  )\n\nconst getPosition = (start, end, elapsed, duration, easeFn) => {\n  if (elapsed > duration) return end\n  return start + (end - start) * easeFn(elapsed / duration)\n}\n\nexport default function scrollTo(element, options) {\n  const { duration, offset, context } = { ...defaultOptions, ...options }\n  const start = window.pageYOffset\n  let innerHeight\n  let scrollHeight\n  if (context !== window) {\n    innerHeight = context.offsetHeight\n    scrollHeight = context.scrollHeight\n  } else {\n    innerHeight = window.innerHeight\n    scrollHeight = document.body.scrollHeight\n  }\n  const clock = Date.now() - 1\n  return new Promise(resolve => {\n    const step = () => {\n      const elapsed = Date.now() - clock\n      const end =\n        typeof element === 'number'\n          ? parseInt(element)\n          : getTop(element, offset, scrollHeight, innerHeight)\n      if (context !== window) {\n        context.scrollTop = getPosition(start, end, elapsed, duration, ease)\n      } else {\n        window.scroll(0, getPosition(start, end, elapsed, duration, ease))\n      }\n\n      if (typeof duration === 'undefined' || elapsed > duration) {\n        resolve()\n        return\n      }\n\n      // Sanity check to prevent taking over the scroll once we prematurely got to the element\n      if (start === end) {\n        resolve()\n        return\n      }\n\n      raf(step)\n    }\n    step()\n  })\n}\n"],"file":"scrollTo.js"}