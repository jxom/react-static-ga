{"version":3,"sources":["../../../src/browser/components/Prefetch.js"],"names":["Prefetch","props","path","onLoad","cleanedPath","data","el","force","runPrefetch","children","rest","handleRef","React","Component"],"mappings":";;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqBA,Q;;;;;;;;;;;;;;;;;;0FAcL;AAAA,aACZ;AAAA;AAAA,gCAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,8BAC0B,MAAKC,KAD/B,EACSC,IADT,eACSA,IADT,EACeC,MADf,eACeA,MADf;AAEOC,gBAAAA,WAFP,GAEqB,yBAAaF,IAAb,CAFrB;AAAA;AAAA,uBAGoB,gBAASE,WAAT,CAHpB;;AAAA;AAGOC,gBAAAA,IAHP;AAICF,gBAAAA,MAAM,CAACE,IAAD,EAAOD,WAAP,CAAN;;AAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD,IADY;AAAA,K;;wFAQF,UAAAE,EAAE,EAAI;AAChB,UAAI,CAAC,MAAKL,KAAL,CAAWM,KAAZ,IAAqBD,EAAzB,EAA6B;AAC3B,iCAAUA,EAAV,EAAc,MAAKE,WAAnB;AACD;AACF,K;;;;;;;wCAlBmB;AAClB,UAAI,KAAKP,KAAL,CAAWM,KAAf,EAAsB;AACpB,aAAKC,WAAL;AACD;AACF;;;6BAgBQ;AAAA,yBACuB,KAAKP,KAD5B;AAAA,UACCQ,QADD,gBACCA,QADD;AAAA,UACcC,IADd;;AAEP,UAAID,QAAJ,EAAc;AACZ,eAAOA,QAAQ,CAAC;AAAEE,UAAAA,SAAS,EAAE,KAAKA;AAAlB,SAAD,CAAf;AACD;;AACD,aACE;AAAK,QAAA,GAAG,EAAE,KAAKA;AAAf,SAA8BD,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACGD,QADH,CADF;AAKD;;;;;;;;;;;EAtCmCG,eAAMC,S;;;;gBAAvBb,Q,kBACG;AACpBS,EAAAA,QAAQ,EAAE,IADU;AAEpBP,EAAAA,IAAI,EAAE,IAFc;AAGpBK,EAAAA,KAAK,EAAE,KAHa;AAIpBJ,EAAAA,MAAM,EAAE,kBAAM,CAAE;AAJI,C;;;;;;;;;;;;;0BADHH,Q","sourcesContent":["import React from 'react'\n\nimport { getRoutePath } from '../utils'\nimport { prefetch } from '../'\nimport onVisible from '../utils/Visibility'\n\nexport default class Prefetch extends React.Component {\n  static defaultProps = {\n    children: null,\n    path: null,\n    force: false,\n    onLoad: () => {},\n  }\n\n  componentDidMount() {\n    if (this.props.force) {\n      this.runPrefetch()\n    }\n  }\n\n  runPrefetch = () =>\n    (async () => {\n      const { path, onLoad } = this.props\n      const cleanedPath = getRoutePath(path)\n      const data = await prefetch(cleanedPath)\n      onLoad(data, cleanedPath)\n    })()\n\n  handleRef = el => {\n    if (!this.props.force && el) {\n      onVisible(el, this.runPrefetch)\n    }\n  }\n\n  render() {\n    const { children, ...rest } = this.props\n    if (children) {\n      return children({ handleRef: this.handleRef })\n    }\n    return (\n      <div ref={this.handleRef} {...rest}>\n        {children}\n      </div>\n    )\n  }\n}\n"],"file":"Prefetch.js"}